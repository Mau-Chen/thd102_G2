<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    @@include('layout/meta.html')
    <link rel="stylesheet" href="css/style.css" />
    <title>Go會員 | PetpaGo</title>
  </head>

  <body>
    <div class="wrapper bg_gray">
      @@include('layout/header.html')

      <main class="container member-main">
        @@include("layout/member-sideBar.html")
        
        <div class="member-box col-10 col-lg-9 col-sm-12 mr-bg">
          <!-- Out of Orders -->
          <div id="order5" class="kite order2" style="display:none;">
              <div class="kite-flex">  <!--為了讓裡面的flex作用多包的一層-->
                <img src="images/icon/member-icon/nolist.svg" alt="" />
                <h5>尚無訂單</h5>
              </div>
          </div>


          <!------------ 訂單紀錄 listBody ------------>
          <ul id="order" style="display:block;">
                      <!-- 使用 vue 渲染 -->
                      <!-- <template v-if="tasks != '' "></template> -->
                      <!-- <template v-else> </template> -->
                      <list :tasks="tasks"></list>
                      <!--   vue end   -->
          
          </ul>
    

          <!-- memberPoints -->
          <div id="order2" class="order2" style="display:none;">
                      <h5 class="mb_24">我的點數</h5>
                      <div class="points-use mb_24">
                        <h6>會員點數如何用?</h6>
                        <p>
                          於PetpaGo進行消費，每100元將回饋1點 Pet
                          Point可於下次預訂時折抵訂單總金額，1點可折抵新台幣1元每筆訂單最多可折抵總金額的20%
                        </p>
                      </div>
                      <div class="table-wrap">
                        <table>
                          <tr>
                            <th>訂單編號</th>
                            <th>日期</th>
                            <th>總金額</th>
                            <th>獲得點數</th>
                          </tr>
                          <tr>
                            <td>PT0001</td>
                            <td>2023年8月4日</td>
                            <td>NT$5,070</td>
                            <td>50</td>
                          </tr>
                          <tr>
                            <td>PT0002</td>
                            <td>2023年8月4日</td>
                            <td>NT$5,070</td>
                            <td>30</td>
                          </tr>
                          <tr>
                            <td>PT0003</td>
                            <td>2023年8月4日</td>
                            <td>NT$5,070</td>
                            <td>20</td>
                          </tr>
                          <tr>
                            <td>PT0004</td>
                            <td>2023年8月4日</td>
                            <td>NT$5,070</td>
                            <td>10</td>
                          </tr>
                        </table>
                      </div>
          </div>
    
    
          <!-- memberPost -->
          <div id="order3" class="order2" style="display:none;">
                      <h5 class="mb_24">我的貼文</h5>
                      <div class="post-info">
                        <div class="">
                          <p>發文</p>
                        </div>
                        <div class="">
                          <p>日期</p>
                        </div>
                      </div>
            
                      <div class="post-detail">
                        <a href="#img1" style="display:block">
                          <img src="images/pic/member/member-post01.png" alt="photo01" />
                        </a>
                        <a href="#" class="lightbox" id="img1">
                          <span style="background-image: url('images/pic/member/member-big post01.jpg');"></span>
                        </a>
                        <div class="post-date-delete">
                          <div class="post-date">
                            <p>2023年8月4日</p>
                          </div>
                          <div class="post-delete">
                            <img src="images/icon/shop-icon/delete.svg" alt="delete"/>
                          </div>
                        </div>
                      </div>

                      <div class="post-detail">
                        <a href="#img2" style="display:block">
                          <img src="images/pic/member/member-post02.png" alt="photo02" />
                        </a>
                        <a href="#" class="lightbox" id="img2">
                          <span style="background-image: url('images/pic/member/member-big post02.jpg');"></span>
                        </a>                      
                        <div class="post-date-delete">
                          <div class="post-date">
                            <p>2023年8月4日</p>
                          </div>
                          <div class="post-delete">
                            <img src="images/icon/shop-icon/delete.svg" alt="delete"/>
                          </div>
                        </div>
                      </div>
            
                      <div class="post-detail">
                        <a href="#img3" style="display:block">
                          <img src="images/pic/member/member-post03.png" alt="photo03" />
                        </a>
                        <a href="#" class="lightbox" id="img3">
                          <span style="background-image: url('images/pic/member/member-big post03.jpg');"></span>
                        </a>
                        <div class="post-date-delete">
                          <div class="post-date">
                            <p>2023年8月4日</p>
                          </div>
                          <div class="post-delete">
                            <img src="images/icon/shop-icon/delete.svg" alt="delete"/>
                          </div>
                        </div>
                      </div>
            
                      <div class="post-detail">
                        <a href="#img4" style="display:block">
                          <img src="images/pic/member/member-post04.png" alt="photo04" />
                        </a>
                        <a href="#" class="lightbox" id="img4">
                          <span style="background-image: url('images/pic/member/member-big post04.jpg');"></span>
                        </a>
                        <div class="post-date-delete">
                          <div class="post-date">
                            <p>2023年8月4日</p>
                          </div>
                          <div class="post-delete">
                            <img src="images/icon/shop-icon/delete.svg" alt="delete"/>
                          </div>
                        </div>
                      </div>
          </div>
          <!-- <div id="order3" class="order2" style="display:none;">
            <h5 class="mb_24">我的貼文</h5>
            <div class="post-info">
              <div class="">
                <p>發文</p>
              </div>
              <div class="">
                <p>日期</p>
              </div>
            </div>
            <post-detail :posts="posts"></post-detail>
          </div>
     -->
          <!-- memberSetting -->
          <div id="order4" class="order2" style="display:none;">
                      <h5 class="">個人資料</h5>
          
                      <!-- 個人資料帶入 -->
                      <form action="" class="personal-info">
                        <div class="pi-box">
                          <div class="pi-box-half">
                            <label for="">姓名</label>
                            <input type="text" placeholder="請輸入姓名" />
                          </div>
                          <div class="pi-box-half">
                            <label for="">行動電話</label>
                            <input type="text" placeholder="請輸入行動電話" />
                          </div>
                        </div>
            
                        <div class="pi-box">
                          <div class="pi-box-half">
                            <label for="">電子信箱</label>
                            <input
                              class="email-bg"
                              type="text"
                              placeholder="service@tibame.com"
                              disabled
                            />
                          </div>
                          <div class="pi-box-half">
                            <label for="">出生日期</label>
                            <input type="date" placeholder="請選擇" id="myDateInput"/>
                          </div>
                        </div>
            
                        <div class="pi-box">
                          <div class="pi-box-half col-12">
                            <label for="">地址</label>
                            <input type="text" placeholder="請輸入地址"/>
                          </div>
                        </div>
                      </form>
            
                      <!-- <div class="udate-info"> -->
                      <button class="btn_5">更新資訊</button>
                      <!-- </div> -->
          </div>


        </div>
      </main>
      @@include('layout/footer.html')
    </div>
    <script type="module" src="js/memberOrder.js"></script>
    
    <!-- <script> //取消預約
      document.addEventListener('DOMContentLoaded', function() {
          const container = document.getElementById('order'); // 假設父元素的ID為 "order"
          
          if (container) {
              container.addEventListener('click', function(event) {
                  // 檢查被點擊的元素是否是 ".cancel-btn"
                  if (event.target.classList.contains('cancel-btn')) {
                      const isConfirmed = confirm('確定要取消此預約嗎？');
                      if (isConfirmed) {
                          // 找到父層的 li 元素並移除它
                          const liElement = event.target.closest('li.accordion');
                          if (liElement) {
                              liElement.parentNode.removeChild(liElement);
                          }
                      }
                }
            });
          }
      });

    </script> -->

    <script> //刪除myPost
          document.addEventListener("DOMContentLoaded",function(){
            let postDetail = document.querySelectorAll(".post-detail");
    
            postDetail.forEach(function(post_detail){
              let postDelete = post_detail.querySelector(".post-delete");
              postDelete.addEventListener("click",function(){
                const isConfirmed = confirm('確定要刪除此貼文嗎？');
                // console.log("Hello, it's me");
                if(isConfirmed){
                  post_detail.style.display = 'none';
                };
              });
            });
          });
    </script>

    <script> //切換tab
        document.addEventListener('DOMContentLoaded', function() {
          const sideBarLinks = document.querySelectorAll("[data-target]");
          
          sideBarLinks.forEach(link => {
              link.addEventListener("click", function(event) {
                  // 防止默認事件（不導航）
                  event.preventDefault();

                  // 隱藏所有頁面
                  const orders = document.querySelectorAll('[id^="order"]');
                  orders.forEach(order => {
                      order.style.display = "none";
                  });

                  // 顯示被點擊的連結對應的頁面
                  const targetId = event.currentTarget.getAttribute("data-target");
                  const targetOrder = document.getElementById(targetId);
                  if (targetOrder) {
                      targetOrder.style.display = "block";
                  }
              });
          });
      });
    </script>

    <script> //讓出生日期只能選今天以前
      let today = new Date();
      let dd = String(today.getDate()).padStart(2, '0');
      let mm = String(today.getMonth() + 1).padStart(2, '0');
      let yyyy = today.getFullYear();

      today = yyyy + '-' + mm + '-' + dd;
      document.getElementById("myDateInput").setAttribute("max", today);
    </script>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
      const container = document.getElementById('order'); // 假設父元素的ID為 "order"
      const emptyMessage = document.getElementById('order5'); // 假設無訂單訊息的ID為 "order5"

      function checkIfEmpty() {
        if (container.children.length === 0) {
          emptyMessage.style.display = 'block';
        }
      }

      // 初始檢查
      checkIfEmpty();

      if (container) {
        container.addEventListener('click', function(event) {
          if (event.target.classList.contains('cancel-btn')) {
            const isConfirmed = confirm('確定要取消此預約嗎？');
            if (isConfirmed) {
              const liElement = event.target.closest('li.accordion');
              if (liElement) {
                liElement.parentNode.removeChild(liElement);
              }
              // 再次檢查是否為空
              checkIfEmpty();
            }
          }
        });
      }
    });

    </script>
  </body>
</html>
